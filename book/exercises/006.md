(python_functions)=
# Session 6: Functions - Reusable Code Blocks

Functions are one of the most important concepts in programming! They allow you to write code once and use it many times. Think of functions as recipes that you can follow whenever you need to cook the same dish.

::::::{topic} Learning Objectives
By the end of this session, you will be able to:
- Create and call functions
- Pass parameters to functions
- Return values from functions
- Understand function scope
- Write reusable code with functions
::::::

## What are Functions?

A function is a block of code that performs a specific task. Instead of writing the same code over and over, you can create a function and call it whenever needed.

```python
# Simple function
def greet():
    print("Hello, World!")

# Call the function
greet()  # Output: Hello, World!
```

## Functions with Parameters

Parameters allow you to pass data into a function:

```python
# Function with parameters
def greet_person(name):
    print(f"Hello, {name}!")

# Call the function with different names
greet_person("Alice")  # Output: Hello, Alice!
greet_person("Bob")    # Output: Hello, Bob!
```

## Functions with Multiple Parameters

You can pass multiple parameters to a function:

```python
# Function with multiple parameters
def greet_with_age(name, age):
    print(f"Hello, {name}! You are {age} years old.")

# Call the function
greet_with_age("Alice", 25)  # Output: Hello, Alice! You are 25 years old.
```

## Functions that Return Values

Functions can return values using the `return` statement:

```python
# Function that returns a value
def add_numbers(a, b):
    result = a + b
    return result

# Use the returned value
sum_result = add_numbers(5, 3)
print(sum_result)  # Output: 8

# You can also use the function directly
print(add_numbers(10, 20))  # Output: 30
```

## Practical Examples

### Example 1: Calculator Functions

```python
# Calculator functions
def add(x, y):
    return x + y

def subtract(x, y):
    return x - y

def multiply(x, y):
    return x * y

def divide(x, y):
    if y != 0:
        return x / y
    else:
        return "Cannot divide by zero!"

# Use the functions
print(add(10, 5))        # Output: 15
print(subtract(10, 5))   # Output: 5
print(multiply(10, 5))   # Output: 50
print(divide(10, 5))     # Output: 2.0
print(divide(10, 0))     # Output: Cannot divide by zero!
```

### Example 2: String Functions

```python
# String manipulation functions
def format_name(first, last):
    return f"{first} {last}".title()

def create_email(first, last, domain="company.com"):
    return f"{first.lower()}.{last.lower()}@{domain}"

# Use the functions
full_name = format_name("john", "doe")
email = create_email("john", "doe")
print(full_name)  # Output: John Doe
print(email)      # Output: john.doe@company.com
```

## Practice Exercise

Create a program with functions to calculate the area and perimeter of different shapes:

```python
# Shape calculator functions
import math

def rectangle_area(length, width):
    return length * width

def rectangle_perimeter(length, width):
    return 2 * (length + width)

def circle_area(radius):
    return math.pi * radius ** 2

def circle_perimeter(radius):
    return 2 * math.pi * radius

# Interactive shape calculator
print("Shape Calculator")
print("=" * 15)

shape = input("Enter shape (rectangle, circle): ").lower()

if shape == "rectangle":
    length = float(input("Enter length: "))
    width = float(input("Enter width: "))
    area = rectangle_area(length, width)
    perimeter = rectangle_perimeter(length, width)
    print(f"Area: {area}")
    print(f"Perimeter: {perimeter}")

elif shape == "circle":
    radius = float(input("Enter radius: "))
    area = circle_area(radius)
    perimeter = circle_perimeter(radius)
    print(f"Area: {area:.2f}")
    print(f"Perimeter: {perimeter:.2f}")

else:
    print("Invalid shape!")
```

::::{tip} Function Best Practices
- Use descriptive names for functions and parameters
- Keep functions small and focused on one task
- Use docstrings to document what your function does
- Return values instead of printing inside functions when possible
::::

::::{card} Quick Check
What will be the output of this code?
```python
def multiply(x, y):
    return x * y

result = multiply(3, 4)
print(result)
```
::::

::::{card} Quick Check
What's wrong with this function?
```python
def add_numbers(a, b):
    result = a + b
    print(result)

sum = add_numbers(5, 3)
print(sum * 2)
```
::::

## Guided Questions - Step by Step

Work through these questions step by step. Each question will guide you through the thinking process and show you exactly how to solve it.

### Question 1: Basic Function Definition
**Problem:** Create a function that prints "Hello, World!".

**Step 1:** Define the function
```python
def greet():
    print("Hello, World!")
```

**Step 2:** Call the function
```python
greet()
```

**Step 3:** Test it
Run the code to see the output.

### Question 2: Function with Parameters
**Problem:** Create a function that greets a person by name.

**Step 1:** Define the function with a parameter
```python
def greet_person(name):
    print(f"Hello, {name}!")
```

**Step 2:** Call the function with different names
```python
greet_person("Alice")
greet_person("Bob")
```

**Step 3:** Test with different names
Try calling the function with your own name.

### Question 3: Function with Multiple Parameters
**Problem:** Create a function that takes two numbers and adds them.

**Step 1:** Define the function with two parameters
```python
def add_numbers(a, b):
    result = a + b
    print(f"{a} + {b} = {result}")
```

**Step 2:** Call the function with different numbers
```python
add_numbers(5, 3)
add_numbers(10, 20)
```

**Step 3:** Try different combinations
Test with various number pairs.

### Question 4: Function that Returns a Value
**Problem:** Create a function that multiplies two numbers and returns the result.

**Step 1:** Define the function with return
```python
def multiply(x, y):
    result = x * y
    return result
```

**Step 2:** Call the function and use the result
```python
product = multiply(4, 5)
print(f"The product is {product}")
```

**Step 3:** Use the result in calculations
```python
total = multiply(3, 4) + multiply(2, 5)
print(f"Total: {total}")
```

### Question 5: Function with Default Parameters
**Problem:** Create a function that greets someone with a customizable greeting.

**Step 1:** Define the function with default parameter
```python
def greet_with_message(name, message="Hello"):
    print(f"{message}, {name}!")
```

**Step 2:** Call with and without the second parameter
```python
greet_with_message("Alice")
greet_with_message("Bob", "Good morning")
```

**Step 3:** Try different messages
Test with various greeting messages.

### Question 6: Function with String Operations
**Problem:** Create a function that formats a name (first and last name).

**Step 1:** Define the function
```python
def format_name(first, last):
    full_name = f"{first} {last}"
    return full_name.title()
```

**Step 2:** Call the function and use the result
```python
formatted = format_name("john", "doe")
print(f"Formatted name: {formatted}")
```

**Step 3:** Try different names
Test with various first and last names.

### Question 7: Function with Conditional Logic
**Problem:** Create a function that determines if a number is even or odd.

**Step 1:** Define the function with conditional logic
```python
def is_even(number):
    if number % 2 == 0:
        return True
    else:
        return False
```

**Step 2:** Call the function and use the result
```python
result = is_even(8)
print(f"8 is even: {result}")
```

**Step 3:** Test with different numbers
Try both even and odd numbers.

### Question 8: Function with Multiple Return Values
**Problem:** Create a function that returns both the sum and product of two numbers.

**Step 1:** Define the function with multiple returns
```python
def sum_and_product(a, b):
    sum_result = a + b
    product_result = a * b
    return sum_result, product_result
```

**Step 2:** Call the function and unpack the results
```python
sum_val, product_val = sum_and_product(3, 4)
print(f"Sum: {sum_val}, Product: {product_val}")
```

**Step 3:** Try different number pairs
Test with various combinations.

### Question 9: Function with List Processing
**Problem:** Create a function that finds the maximum number in a list.

**Step 1:** Define the function
```python
def find_max(numbers):
    max_num = numbers[0]
    for num in numbers:
        if num > max_num:
            max_num = num
    return max_num
```

**Step 2:** Call the function with a list
```python
numbers = [5, 2, 8, 1, 9]
max_number = find_max(numbers)
print(f"Maximum number: {max_number}")
```

**Step 3:** Try different lists
Test with various number lists.

### Question 10: Function with Error Handling
**Problem:** Create a function that divides two numbers and handles division by zero.

**Step 1:** Define the function with error handling
```python
def safe_divide(a, b):
    if b == 0:
        return "Cannot divide by zero!"
    else:
        return a / b
```

**Step 2:** Call the function with different values
```python
result1 = safe_divide(10, 2)
result2 = safe_divide(10, 0)
print(f"10 / 2 = {result1}")
print(f"10 / 0 = {result2}")
```

**Step 3:** Test edge cases
Try different division scenarios.

### Question 11: Function with String Validation
**Problem:** Create a function that checks if a password meets minimum requirements.

**Step 1:** Define the function with validation
```python
def is_valid_password(password):
    if len(password) >= 8:
        return True
    else:
        return False
```

**Step 2:** Call the function with different passwords
```python
result1 = is_valid_password("password123")
result2 = is_valid_password("short")
print(f"'password123' is valid: {result1}")
print(f"'short' is valid: {result2}")
```

**Step 3:** Try different password lengths
Test with various password lengths.

### Question 12: Function with Mathematical Operations
**Problem:** Create a function that calculates the area of a rectangle.

**Step 1:** Define the function
```python
def rectangle_area(length, width):
    area = length * width
    return area
```

**Step 2:** Call the function and use the result
```python
area = rectangle_area(5, 3)
print(f"Area of rectangle: {area}")
```

**Step 3:** Try different dimensions
Test with various length and width values.

### Question 13: Function with Loop Inside
**Problem:** Create a function that prints a countdown from a given number.

**Step 1:** Define the function with a loop
```python
def countdown(n):
    for i in range(n, 0, -1):
        print(i)
    print("Blast off!")
```

**Step 2:** Call the function with different numbers
```python
countdown(5)
```

**Step 3:** Try different countdown values
Test with various starting numbers.

### Question 14: Function with String Manipulation
**Problem:** Create a function that reverses a string.

**Step 1:** Define the function
```python
def reverse_string(text):
    reversed_text = ""
    for char in text:
        reversed_text = char + reversed_text
    return reversed_text
```

**Step 2:** Call the function and use the result
```python
original = "Hello"
reversed = reverse_string(original)
print(f"Original: {original}")
print(f"Reversed: {reversed}")
```

**Step 3:** Try different strings
Test with various text inputs.

### Question 15: Function with Multiple Conditions
**Problem:** Create a function that determines the grade based on a score.

**Step 1:** Define the function with multiple conditions
```python
def get_grade(score):
    if score >= 90:
        return "A"
    elif score >= 80:
        return "B"
    elif score >= 70:
        return "C"
    elif score >= 60:
        return "D"
    else:
        return "F"
```

**Step 2:** Call the function with different scores
```python
grade1 = get_grade(95)
grade2 = get_grade(75)
print(f"Score 95 gets grade: {grade1}")
print(f"Score 75 gets grade: {grade2}")
```

**Step 3:** Test with different score ranges
Try scores in each grade range.

### Question 16: Function with List Creation
**Problem:** Create a function that generates a list of even numbers up to a given limit.

**Step 1:** Define the function
```python
def get_even_numbers(limit):
    even_numbers = []
    for i in range(2, limit + 1, 2):
        even_numbers.append(i)
    return even_numbers
```

**Step 2:** Call the function and use the result
```python
evens = get_even_numbers(10)
print(f"Even numbers up to 10: {evens}")
```

**Step 3:** Try different limits
Test with various upper limits.

### Question 17: Function with Nested Logic
**Problem:** Create a function that checks if a year is a leap year.

**Step 1:** Define the function with nested conditions
```python
def is_leap_year(year):
    if year % 4 == 0:
        if year % 100 == 0:
            if year % 400 == 0:
                return True
            else:
                return False
        else:
            return True
    else:
        return False
```

**Step 2:** Call the function with different years
```python
result1 = is_leap_year(2024)
result2 = is_leap_year(1900)
print(f"2024 is leap year: {result1}")
print(f"1900 is leap year: {result2}")
```

**Step 3:** Test with various years
Try different years to test the logic.

### Question 18: Function with Accumulation
**Problem:** Create a function that calculates the factorial of a number.

**Step 1:** Define the function with accumulation
```python
def factorial(n):
    result = 1
    for i in range(1, n + 1):
        result *= i
    return result
```

**Step 2:** Call the function with different numbers
```python
fact = factorial(5)
print(f"5! = {fact}")
```

**Step 3:** Try different numbers
Test with various factorial calculations.

### Question 19: Function with String Formatting
**Problem:** Create a function that formats a person's information into a sentence.

**Step 1:** Define the function
```python
def format_person_info(name, age, city):
    return f"{name} is {age} years old and lives in {city}."
```

**Step 2:** Call the function with different information
```python
info = format_person_info("Alice", 25, "New York")
print(info)
```

**Step 3:** Try different person information
Test with various names, ages, and cities.

### Question 20: Function with Multiple Operations
**Problem:** Create a function that performs multiple mathematical operations on two numbers.

**Step 1:** Define the function with multiple operations
```python
def math_operations(a, b):
    sum_result = a + b
    difference = a - b
    product = a * b
    quotient = a / b if b != 0 else "Cannot divide by zero"
    
    return {
        "sum": sum_result,
        "difference": difference,
        "product": product,
        "quotient": quotient
    }
```

**Step 2:** Call the function and use the results
```python
results = math_operations(10, 2)
print(f"Sum: {results['sum']}")
print(f"Difference: {results['difference']}")
print(f"Product: {results['product']}")
print(f"Quotient: {results['quotient']}")
```

**Step 3:** Try different number pairs
Test with various number combinations.

## Practice Questions - Test Your Knowledge

These questions provide just the problem and the correct answer. Try to solve them on your own first!

### Question 1
**Problem:** What will this code print?
```python
def greet():
    print("Hello!")

greet()
```
**Answer:** `Hello!`

### Question 2
**Problem:** What will this code print?
```python
def add(x, y):
    return x + y

result = add(3, 4)
print(result)
```
**Answer:** `7`

### Question 3
**Problem:** What will this code print?
```python
def multiply(a, b):
    return a * b

print(multiply(5, 2))
```
**Answer:** `10`

### Question 4
**Problem:** What will this code print?
```python
def greet(name):
    print(f"Hello, {name}!")

greet("Alice")
```
**Answer:** `Hello, Alice!`

### Question 5
**Problem:** What will this code print?
```python
def is_positive(n):
    return n > 0

print(is_positive(5))
```
**Answer:** `True`

### Question 6
**Problem:** What will this code print?
```python
def square(x):
    return x * x

result = square(4)
print(result)
```
**Answer:** `16`

### Question 7
**Problem:** What will this code print?
```python
def get_grade(score):
    if score >= 90:
        return "A"
    else:
        return "B"

print(get_grade(85))
```
**Answer:** `B`

### Question 8
**Problem:** What will this code print?
```python
def greet_with_default(name, greeting="Hello"):
    print(f"{greeting}, {name}!")

greet_with_default("Bob")
```
**Answer:** `Hello, Bob!`

### Question 9
**Problem:** What will this code print?
```python
def add_numbers(a, b, c):
    return a + b + c

print(add_numbers(1, 2, 3))
```
**Answer:** `6`

### Question 10
**Problem:** What will this code print?
```python
def is_even(n):
    return n % 2 == 0

print(is_even(7))
```
**Answer:** `False`

### Question 11
**Problem:** What will this code print?
```python
def get_max(a, b):
    if a > b:
        return a
    else:
        return b

print(get_max(10, 5))
```
**Answer:** `10`

### Question 12
**Problem:** What will this code print?
```python
def format_name(first, last):
    return f"{first} {last}".title()

print(format_name("john", "doe"))
```
**Answer:** `John Doe`

### Question 13
**Problem:** What will this code print?
```python
def calculate_area(length, width):
    return length * width

area = calculate_area(6, 4)
print(area)
```
**Answer:** `24`

### Question 14
**Problem:** What will this code print?
```python
def get_grade(score):
    if score >= 80:
        return "Pass"
    else:
        return "Fail"

print(get_grade(75))
```
**Answer:** `Fail`

### Question 15
**Problem:** What will this code print?
```python
def double(x):
    return x * 2

result = double(8)
print(result)
```
**Answer:** `16`

### Question 16
**Problem:** What will this code print?
```python
def is_positive(n):
    if n > 0:
        return True
    else:
        return False

print(is_positive(-3))
```
**Answer:** `False`

### Question 17
**Problem:** What will this code print?
```python
def greet_with_message(name, message="Hi"):
    print(f"{message}, {name}!")

greet_with_default("Alice", "Good morning")
```
**Answer:** `Good morning, Alice!`

### Question 18
**Problem:** What will this code print?
```python
def get_absolute(n):
    if n < 0:
        return -n
    else:
        return n

print(get_absolute(-5))
```
**Answer:** `5`

### Question 19
**Problem:** What will this code print?
```python
def add_and_multiply(x, y):
    return x + y, x * y

sum_val, product_val = add_and_multiply(3, 4)
print(sum_val)
```
**Answer:** `7`

### Question 20
**Problem:** What will this code print?
```python
def is_valid_age(age):
    return 0 <= age <= 120

print(is_valid_age(25))
```
**Answer:** `True`

## Real-World Example: Why Functions Matter

Imagine you're building a simple calculator app. You need to add, subtract, multiply, and divide numbers. Instead of writing the same code over and over again, you can create functions to do each operation.

**The problem with repeating code:**
```python
# Without functions - lots of repeated code
num1 = 10
num2 = 5
result1 = num1 + num2
print(f"10 + 5 = {result1}")

num3 = 20
num4 = 3
result2 = num3 + num4
print(f"20 + 3 = {result2}")

# This gets repetitive and hard to maintain!
```

**Real example:** In 2014, a security bug called "Heartbleed" affected millions of websites worldwide. The problem was in a function that was supposed to keep secure connections alive. The function didn't properly check the input it received, so hackers could trick it into giving away secret information like passwords and credit card numbers. This happened because the function wasn't designed to handle unexpected input safely.

**The programming lesson:**
This shows why it's important to:
- Always check the input your functions receive
- Make sure your functions handle unexpected situations
- Test your functions with different inputs
- Design functions that are safe and reliable

**Key takeaways:**
- Functions help you avoid repeating code
- Always validate the input your functions receive
- Test your functions thoroughly
- Make your functions clear and easy to understand

## Open-Ended Practice Questions

Try these simple exercises to practice creating and using functions:

1. **Question:** You're making a simple calculator. How would you create a function to add two numbers?

   **Self-Check:** Write a function called `add_numbers` that takes two parameters and returns their sum. Test it with different numbers like 5 and 3, or 10 and 20. Make sure it returns the correct answer.

2. **Question:** You want to create a function that greets someone by name. How would you do this?

   **Self-Check:** Write a function called `greet` that takes a name as a parameter and prints "Hello, [name]!" Test it with different names like "Alice", "Bob", and "Charlie".

3. **Question:** You're making a simple tip calculator. How would you create a function that calculates a 20% tip?

   **Self-Check:** Write a function called `calculate_tip` that takes a bill amount and returns the tip amount. Test it with different bill amounts like $25, $50, and $100. Make sure the math is correct.

4. **Question:** What's the difference between a function that prints something and a function that returns something?

   **Self-Check:** Create two functions:
   - One that prints "Hello" and returns nothing
   - One that returns "Hello" but doesn't print anything
   
   Try using both functions and see what happens. Which one is more useful?

5. **Question:** You're making a simple grade calculator. How would you create a function that converts a percentage to a letter grade?

   **Self-Check:** Write a function that takes a percentage score and returns a letter grade (A, B, C, D, or F). Test it with different scores like 95, 85, 75, 65, and 55. Make sure it returns the correct letter grade for each score.