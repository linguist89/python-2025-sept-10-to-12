(python_loops)=
# Session 5: Repeating Code with Loops

Now that you can make decisions with conditionals, let's learn how to repeat code efficiently! Loops are one of the most powerful features in programming.

::::::{topic} Learning Objectives
By the end of this session, you will be able to:
- Use `for` loops to repeat code
- Use `while` loops for conditional repetition
- Understand when to use each type of loop
- Use `range()` function effectively
- Control loop execution with `break` and `continue`
::::::

## For Loops

For loops repeat code a specific number of times or iterate through a sequence:

```python
# Simple for loop
for i in range(5):
    print(f"Count: {i}")

# Output:
# Count: 0
# Count: 1
# Count: 2
# Count: 3
# Count: 4
```

## The Range Function

The `range()` function generates a sequence of numbers:

```python
# Different ways to use range()
print("range(5):")
for i in range(5):
    print(i)  # 0, 1, 2, 3, 4

print("\nrange(1, 6):")
for i in range(1, 6):
    print(i)  # 1, 2, 3, 4, 5

print("\nrange(0, 10, 2):")
for i in range(0, 10, 2):
    print(i)  # 0, 2, 4, 6, 8

print("\nrange(10, 0, -1):")
for i in range(10, 0, -1):
    print(i)  # 10, 9, 8, 7, 6, 5, 4, 3, 2, 1
```

## For Loops with Strings

You can iterate through each character in a string:

```python
# Iterate through a string
word = "Python"
for letter in word:
    print(letter)

# Output:
# P
# y
# t
# h
# o
# n
```

## While Loops

While loops repeat code as long as a condition is true:

```python
# Simple while loop
count = 0
while count < 5:
    print(f"Count: {count}")
    count += 1

# Output:
# Count: 0
# Count: 1
# Count: 2
# Count: 3
# Count: 4
```

## Practical Examples

### Example 1: Number Guessing Game

```python
# Number guessing game
import random

secret_number = random.randint(1, 10)
attempts = 0
max_attempts = 3

print("I'm thinking of a number between 1 and 10.")
print(f"You have {max_attempts} attempts to guess it!")

while attempts < max_attempts:
    guess = int(input("Enter your guess: "))
    attempts += 1
    
    if guess == secret_number:
        print(f"Congratulations! You guessed it in {attempts} attempts!")
        break
    elif guess < secret_number:
        print("Too low!")
    else:
        print("Too high!")
    
    if attempts < max_attempts:
        print(f"You have {max_attempts - attempts} attempts left.")
else:
    print(f"Sorry! The number was {secret_number}.")
```

### Example 2: Multiplication Table

```python
# Multiplication table
number = int(input("Enter a number for multiplication table: "))

print(f"Multiplication table for {number}:")
print("=" * 20)

for i in range(1, 11):
    result = number * i
    print(f"{number} × {i} = {result}")
```

### Example 3: Sum of Numbers

```python
# Sum of numbers from 1 to n
n = int(input("Enter a number: "))
total = 0

for i in range(1, n + 1):
    total += i

print(f"The sum of numbers from 1 to {n} is {total}")
```

## Loop Control: Break and Continue

### Break Statement

The `break` statement exits the loop immediately:

```python
# Break example
for i in range(10):
    if i == 5:
        break
    print(i)

# Output: 0, 1, 2, 3, 4
```

### Continue Statement

The `continue` statement skips the rest of the current iteration:

```python
# Continue example
for i in range(10):
    if i % 2 == 0:  # Skip even numbers
        continue
    print(i)

# Output: 1, 3, 5, 7, 9
```

## Nested Loops

You can put loops inside other loops:

```python
# Nested loops - multiplication table
print("Multiplication Table:")
print("   ", end="")
for i in range(1, 6):
    print(f"{i:4}", end="")
print()

for i in range(1, 6):
    print(f"{i:2}:", end="")
    for j in range(1, 6):
        print(f"{i*j:4}", end="")
    print()
```

## Practice Exercise

Create a program that finds all prime numbers up to a given number:

```python
# Prime number finder
n = int(input("Enter a number to find primes up to: "))

print(f"Prime numbers up to {n}:")
print("=" * 25)

for num in range(2, n + 1):
    is_prime = True
    
    # Check if num is prime
    for i in range(2, int(num ** 0.5) + 1):
        if num % i == 0:
            is_prime = False
            break
    
    if is_prime:
        print(num, end=" ")

print()  # New line at the end
```

## Advanced Example: Pattern Printing

```python
# Pattern printing with nested loops
rows = int(input("Enter number of rows: "))

print("Pattern 1 - Right Triangle:")
for i in range(1, rows + 1):
    for j in range(i):
        print("*", end="")
    print()

print("\nPattern 2 - Inverted Triangle:")
for i in range(rows, 0, -1):
    for j in range(i):
        print("*", end="")
    print()

print("\nPattern 3 - Number Triangle:")
for i in range(1, rows + 1):
    for j in range(1, i + 1):
        print(j, end="")
    print()
```

## When to Use For vs While Loops

### Use For Loops When:
- You know how many times to repeat
- Iterating through a sequence (list, string, range)
- You want to process each item in a collection

### Use While Loops When:
- You don't know how many times to repeat
- The condition depends on user input
- You need to repeat until a certain condition is met

::::{tip} Loop Best Practices
- Always make sure your while loop has a way to end (avoid infinite loops!)
- Use meaningful variable names for loop counters
- Consider using `enumerate()` when you need both index and value
::::

::::{card} Quick Check
What will be the output of this code?
```python
for i in range(3):
    print(i * 2)
```
::::

::::{card} Quick Check
What's wrong with this while loop?
```python
count = 10
while count > 0:
    print(count)
    # Missing: count -= 1
```
::::

## Guided Questions - Step by Step

Work through these questions step by step. Each question will guide you through the thinking process and show you exactly how to solve it.

### Question 1: Basic For Loop
**Problem:** Print the numbers 1 through 5 using a for loop.

**Step 1:** Use range to create the sequence
```python
for i in range(1, 6):
    print(i)
```

**Step 2:** Understand the range
- `range(1, 6)` creates numbers 1, 2, 3, 4, 5
- The loop variable `i` takes each value in turn

**Step 3:** Test it
Run the code to see it print each number on a separate line.

### Question 2: For Loop with Range
**Problem:** Print the numbers 0 through 4 using range(5).

**Step 1:** Use range(5)
```python
for i in range(5):
    print(i)
```

**Step 2:** Understand the output
- `range(5)` creates numbers 0, 1, 2, 3, 4
- This is the most common way to use range

**Step 3:** Try different ranges
Experiment with `range(3)`, `range(10)`, etc.

### Question 3: For Loop with Step
**Problem:** Print even numbers from 0 to 10.

**Step 1:** Use range with step
```python
for i in range(0, 11, 2):
    print(i)
```

**Step 2:** Understand the parameters
- Start: 0
- Stop: 11 (exclusive)
- Step: 2 (increment by 2)

**Step 3:** Try different steps
Try `range(1, 11, 2)` for odd numbers.

### Question 4: For Loop with String
**Problem:** Print each character in the word "Python".

**Step 1:** Loop through the string
```python
word = "Python"
for letter in word:
    print(letter)
```

**Step 2:** Understand the iteration
- Each character becomes the value of `letter`
- The loop runs once for each character

**Step 3:** Try different strings
Test with other words to see how it works.

### Question 5: While Loop Basic
**Problem:** Count from 1 to 5 using a while loop.

**Step 1:** Set up the loop
```python
count = 1
while count <= 5:
    print(count)
    count += 1
```

**Step 2:** Understand the condition
- Loop continues while `count <= 5`
- Don't forget to increment `count`!

**Step 3:** Test it
Make sure it prints 1, 2, 3, 4, 5.

### Question 6: While Loop with User Input
**Problem:** Keep asking for a number until the user enters 0.

**Step 1:** Set up the loop
```python
number = 1  # Start with non-zero value
while number != 0:
    number = int(input("Enter a number (0 to quit): "))
    print(f"You entered: {number}")
```

**Step 2:** Understand the flow
- Loop continues until user enters 0
- Each iteration asks for new input

**Step 3:** Test it
Try entering different numbers, then 0 to exit.

### Question 7: For Loop with Accumulation
**Problem:** Calculate the sum of numbers from 1 to 10.

**Step 1:** Set up the accumulator
```python
total = 0
for i in range(1, 11):
    total += i
print(f"Sum: {total}")
```

**Step 2:** Understand accumulation
- `total` starts at 0
- Each iteration adds the current number to `total`

**Step 3:** Try different ranges
Calculate sum of numbers from 1 to 100.

### Question 8: Nested For Loops
**Problem:** Create a simple multiplication table for numbers 1-3.

**Step 1:** Set up nested loops
```python
for i in range(1, 4):
    for j in range(1, 4):
        result = i * j
        print(f"{i} × {j} = {result}")
```

**Step 2:** Understand nesting
- Outer loop runs 3 times (i = 1, 2, 3)
- Inner loop runs 3 times for each outer iteration

**Step 3:** Try different ranges
Make a larger multiplication table.

### Question 9: Break Statement
**Problem:** Print numbers 1-10, but stop at 5.

**Step 1:** Use break to exit early
```python
for i in range(1, 11):
    if i == 6:
        break
    print(i)
```

**Step 2:** Understand break
- `break` immediately exits the loop
- The condition `i == 6` stops the loop before printing 6

**Step 3:** Try different break conditions
Stop at different numbers.

### Question 10: Continue Statement
**Problem:** Print numbers 1-10, but skip 5.

**Step 1:** Use continue to skip
```python
for i in range(1, 11):
    if i == 5:
        continue
    print(i)
```

**Step 2:** Understand continue
- `continue` skips the rest of the current iteration
- The loop continues with the next value

**Step 3:** Try different skip conditions
Skip different numbers or ranges.

### Question 11: Loop with Counter
**Problem:** Count how many times a loop runs.

**Step 1:** Add a counter
```python
counter = 0
for i in range(5):
    counter += 1
    print(f"Loop iteration {counter}")
```

**Step 2:** Understand the counter
- `counter` tracks how many times the loop has run
- Useful for debugging and understanding loop behavior

**Step 3:** Try different loop types
Use the counter with while loops too.

### Question 12: Loop with Conditional Logic
**Problem:** Print only even numbers from 1 to 20.

**Step 1:** Add a condition inside the loop
```python
for i in range(1, 21):
    if i % 2 == 0:
        print(i)
```

**Step 2:** Understand the logic
- Loop through all numbers 1-20
- Only print if the number is even (divisible by 2)

**Step 3:** Try different conditions
Print only odd numbers, or numbers divisible by 3.

### Question 13: While Loop with Multiple Conditions
**Problem:** Keep looping while a number is positive and less than 100.

**Step 1:** Set up multiple conditions
```python
number = 50
while number > 0 and number < 100:
    print(number)
    number += 10
```

**Step 2:** Understand the logic
- Loop continues while BOTH conditions are true
- `and` means both must be true

**Step 3:** Try different conditions
Use `or` instead of `and` to see the difference.

### Question 14: Loop with String Manipulation
**Problem:** Print each character in a string with its position.

**Step 1:** Use enumerate to get position
```python
word = "Hello"
for i, letter in enumerate(word):
    print(f"Position {i}: {letter}")
```

**Step 2:** Understand enumerate
- `enumerate()` gives you both index and value
- `i` is the position, `letter` is the character

**Step 3:** Try different strings
Test with longer words or sentences.

### Question 15: Loop with List Processing
**Problem:** Print each item in a list with its index.

**Step 1:** Create a list and loop through it
```python
fruits = ["apple", "banana", "orange"]
for i, fruit in enumerate(fruits):
    print(f"{i}: {fruit}")
```

**Step 2:** Understand list iteration
- `enumerate()` works with any sequence
- You get both the index and the item

**Step 3:** Try different lists
Test with lists of numbers, names, etc.

### Question 16: Loop with Range and Step
**Problem:** Print numbers from 10 down to 1.

**Step 1:** Use range with negative step
```python
for i in range(10, 0, -1):
    print(i)
```

**Step 2:** Understand negative step
- Start: 10
- Stop: 0 (exclusive)
- Step: -1 (decrement by 1)

**Step 3:** Try different ranges
Count down from different numbers.

### Question 17: Loop with Accumulation and Condition
**Problem:** Sum only the positive numbers from a list.

**Step 1:** Set up the loop with condition
```python
numbers = [5, -3, 8, -1, 10, -7]
total = 0
for num in numbers:
    if num > 0:
        total += num
print(f"Sum of positive numbers: {total}")
```

**Step 2:** Understand the logic
- Loop through each number
- Only add to total if the number is positive

**Step 3:** Try different conditions
Sum only even numbers, or numbers greater than 5.

### Question 18: Loop with Early Exit
**Problem:** Find the first number greater than 50 in a list.

**Step 1:** Use break to exit early
```python
numbers = [20, 30, 40, 60, 70, 80]
for num in numbers:
    if num > 50:
        print(f"First number > 50: {num}")
        break
```

**Step 2:** Understand early exit
- Loop stops as soon as condition is met
- `break` prevents checking remaining numbers

**Step 3:** Try different conditions
Find first even number, or first negative number.

### Question 19: Loop with Nested Conditions
**Problem:** Print numbers 1-20, but skip multiples of 3 and 5.

**Step 1:** Use continue with multiple conditions
```python
for i in range(1, 21):
    if i % 3 == 0 or i % 5 == 0:
        continue
    print(i)
```

**Step 2:** Understand the logic
- Skip if number is divisible by 3 OR 5
- `continue` skips to next iteration

**Step 3:** Try different skip conditions
Skip different multiples or ranges.

### Question 20: Complex Loop Pattern
**Problem:** Create a pattern of stars using nested loops.

**Step 1:** Set up the pattern
```python
rows = 5
for i in range(rows):
    for j in range(i + 1):
        print("*", end="")
    print()  # New line after each row
```

**Step 2:** Understand the pattern
- Outer loop controls rows
- Inner loop controls stars per row
- `end=""` prevents newline after each star

**Step 3:** Try different patterns
Create different shapes or sizes.

## Practice Questions - Test Your Knowledge

These questions provide just the problem and the correct answer. Try to solve them on your own first!

### Question 1
**Problem:** What will this code print?
```python
for i in range(3):
    print(i)
```
**Answer:** 
```
0
1
2
```

### Question 2
**Problem:** What will this code print?
```python
for i in range(1, 4):
    print(i * 2)
```
**Answer:** 
```
2
4
6
```

### Question 3
**Problem:** What will this code print?
```python
count = 0
while count < 3:
    print(count)
    count += 1
```
**Answer:** 
```
0
1
2
```

### Question 4
**Problem:** What will this code print?
```python
for letter in "Hi":
    print(letter)
```
**Answer:** 
```
H
i
```

### Question 5
**Problem:** What will this code print?
```python
total = 0
for i in range(1, 4):
    total += i
print(total)
```
**Answer:** `6`

### Question 6
**Problem:** What will this code print?
```python
for i in range(5):
    if i == 3:
        break
    print(i)
```
**Answer:** 
```
0
1
2
```

### Question 7
**Problem:** What will this code print?
```python
for i in range(5):
    if i == 3:
        continue
    print(i)
```
**Answer:** 
```
0
1
2
4
```

### Question 8
**Problem:** What will this code print?
```python
for i in range(0, 10, 2):
    print(i)
```
**Answer:** 
```
0
2
4
6
8
```

### Question 9
**Problem:** What will this code print?
```python
for i in range(3, 0, -1):
    print(i)
```
**Answer:** 
```
3
2
1
```

### Question 10
**Problem:** What will this code print?
```python
for i in range(3):
    for j in range(2):
        print(i, j)
```
**Answer:** 
```
0 0
0 1
1 0
1 1
2 0
2 1
```

### Question 11
**Problem:** What will this code print?
```python
word = "cat"
for i, letter in enumerate(word):
    print(i, letter)
```
**Answer:** 
```
0 c
1 a
2 t
```

### Question 12
**Problem:** What will this code print?
```python
numbers = [1, 2, 3, 4, 5]
total = 0
for num in numbers:
    if num % 2 == 0:
        total += num
print(total)
```
**Answer:** `6`

### Question 13
**Problem:** What will this code print?
```python
for i in range(1, 6):
    if i % 2 == 0:
        print(i)
```
**Answer:** 
```
2
4
```

### Question 14
**Problem:** What will this code print?
```python
count = 5
while count > 0:
    print(count)
    count -= 1
```
**Answer:** 
```
5
4
3
2
1
```

### Question 15
**Problem:** What will this code print?
```python
for i in range(3):
    print("*" * (i + 1))
```
**Answer:** 
```
*
**
***
```

### Question 16
**Problem:** What will this code print?
```python
for i in range(5):
    if i == 2:
        break
    print(i)
```
**Answer:** 
```
0
1
```

### Question 17
**Problem:** What will this code print?
```python
for i in range(5):
    if i == 2:
        continue
    print(i)
```
**Answer:** 
```
0
1
3
4
```

### Question 18
**Problem:** What will this code print?
```python
total = 0
for i in range(1, 6):
    total += i
    if total > 10:
        break
print(total)
```
**Answer:** `15`

### Question 19
**Problem:** What will this code print?
```python
for i in range(1, 4):
    for j in range(1, 3):
        print(i * j, end=" ")
    print()
```
**Answer:** 
```
1 2 
2 4 
3 6 
```

### Question 20
**Problem:** What will this code print?
```python
numbers = [10, 20, 30, 40, 50]
for num in numbers:
    if num > 25:
        print(num)
        break
```
**Answer:** `30`

## Real-World Example: Why Loop Control Matters

Imagine you're building a simple program that counts from 1 to 10. You want to use a loop to do this automatically instead of writing 10 separate print statements.

**The problem with infinite loops:**
```python
# This would run forever!
count = 1
while count < 10:
    print(count)
    # Oops! Forgot to increase count
    # This loop will never end!
```

**Real example:** In 2012, a financial company called Knight Capital had a computer program that was supposed to buy and sell stocks automatically. But there was a bug in their loop - it kept buying and selling the same stock over and over again in an infinite loop! In just 45 minutes, they lost $440 million because the loop never stopped. The company almost went bankrupt because of this simple programming mistake.

**The programming lesson:**
This shows why it's important to:
- Always make sure your loops have a way to end
- Test your loops to make sure they work correctly
- Be careful when writing loops that depend on user input
- Make sure your loop conditions are correct

**Key takeaways:**
- Always ensure your loops have proper termination conditions
- Test your loops with different inputs
- Be careful with while loops - they can run forever if not set up correctly
- Use for loops when you know how many times to repeat

## Open-Ended Practice Questions

Try these simple exercises to practice using loops:

1. **Question:** You want to print the numbers 1 through 5. How would you use a for loop to do this?

   **Self-Check:** Write code that uses a for loop to print numbers 1 through 5. Then try changing it to print numbers 1 through 10. Make sure each number appears on a separate line.

2. **Question:** You're making a simple counter. How would you use a while loop to count from 1 to 5?

   **Self-Check:** Write code that uses a while loop to count from 1 to 5. Make sure you increment the counter inside the loop, or it will run forever! Try it and see what happens if you forget to increment the counter.

3. **Question:** You want to print "Hello" 3 times. How would you do this with a loop?

   **Self-Check:** Write code that prints "Hello" exactly 3 times using a loop. Try using both a for loop and a while loop to see which one you prefer.

4. **Question:** What's the difference between a for loop and a while loop?

   **Self-Check:** Write the same program using both types of loops. For example, count from 1 to 5 using both a for loop and a while loop. Which one is easier to understand? Which one is less likely to have bugs?

5. **Question:** You're making a simple guessing game. How would you use a loop to let the user guess up to 3 times?

   **Self-Check:** Write code that asks the user to guess a number (like 7). Give them up to 3 chances to guess correctly. Use a loop to repeat the guessing process. If they guess correctly, tell them they won. If they use all 3 guesses, tell them they lost.